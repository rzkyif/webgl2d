<!DOCTYPE html>
<head>
  <title>WebGL2D</title>
  <link rel="stylesheet" href="./index.css">
</head>
<body>
  <div id="header">
    <input id="f" type="file"/>
  </div>
  <canvas id="c"></canvas>
  <script type="module" src="./index.js">
    console.log("in\n");
    window.onload = function () {
      console.log("onload\n");
      window.ondrag = function (e) {
        var evt = window.event || e;
        var point = [evt.clientX, evt.clientY];
        console.log("ondrag\n");
        shapes.forEach(element => {
          if (element instanceof Line) {
            if (element.isInRangeA(point)) {
              element.setA(point[0],point[1]);
            } else if (element.isInRangeB(point)) {
              element.setB(point[0],point[1]);
            }
          } else if (element instanceof Polygon) {
            element.getPoints().forEach(polygon_point => {
              if (element.isInRange(polygon_point)){
                element.changePolygonPoint(element.getPoints().indexOf(polygon_point),point);
              }
            })
          }
        });
      }
    }
    render();
  </script>
</body>